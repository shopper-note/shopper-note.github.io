!function(e){function t(t){for(var n,i,u=t[0],l=t[1],s=t[2],c=0,f=[];c<u.length;c++)i=u[c],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(d&&d(t);f.length;)f.shift()();return a.push.apply(a,s||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,u=1;u<r.length;u++){var l=r[u];0!==o[l]&&(n=!1)}n&&(a.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},o={3:0},a=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var u=window.webpackJsonp=window.webpackJsonp||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var s=0;s<u.length;s++)t(u[s]);var d=l;a.push([301,0]),r()}({301:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const u=a(r(0)),l=i(r(345)),s=i(r(273)),d=r(244),c=i(r(343)),f=i(r(47)),p=r(40),h=r(69),m=r(43),g=r(313),b=r(316),v=(0,d.styled)("div")(({theme:e})=>e.mixins.toolbar);f.default.render(u.default.createElement(u.default.StrictMode,null,u.default.createElement(()=>{const[e,t]=(0,u.useState)(void 0),[r,n]=(0,u.useState)([]);(0,u.useEffect)(()=>{(0,h.getOrders)().then(e=>console.log(e)),(0,h.getOrders)().then(e=>n(e))},[]),c.default.auth().onAuthStateChanged(e=>{t(e)});return u.default.createElement(u.default.Fragment,null,!e&&u.default.createElement("button",{onClick:async()=>{try{if("chrome-extension:"==window.location.protocol){await p.firebaseAppAuth.signInWithPopup(p.authProviders.googleProvider)}else{await p.firebaseAppAuth.signInWithRedirect(p.authProviders.googleProvider)}}catch(e){m.logger.error(e)}}},"login"),u.default.createElement(l.default,{position:"fixed"},u.default.createElement(s.default,{sx:{m:.5}}),e&&u.default.createElement(b.UserProfile,{user:e}),u.default.createElement(s.default,{sx:{m:.5}})),u.default.createElement(v,null),u.default.createElement(g.Orders,null))},null)),document.getElementById("root"))},313:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Orders=void 0;const u=a(r(0)),l=i(r(273)),s=r(314),d=i(r(51)),c=r(69),f=e=>e.value.toLocaleString({style:"currency",currency:"KRW"})+"원",p=[{field:"market",headerName:"마켓",minWidth:100,type:"singleSelect",valueOptions:["auction","gmarket"]},{field:"orderNumber",headerName:"주문번호",minWidth:120},{field:"orderDate",headerName:"주문일",minWidth:120,type:"date",valueGetter:({value:e})=>e&&e.toDate&&e.toDate()||new Date(e)},{field:"productImageUrl",headerName:"이미지",width:60,renderCell:e=>u.default.createElement(l.default,{component:"img",sx:{height:1,width:1},src:e.value||"http://upload.wikimedia.org/wikipedia/commons/c/ce/Transparent.gif"})},{field:"productName",headerName:"이름",minWidth:400},{field:"price",headerName:"주문가격",minWidth:100,valueFormatter:f},{field:"discount",headerName:"할인",minWidth:100,valueFormatter:f}];t.Orders=({})=>{const[e,t]=(0,u.useState)([]);return(0,u.useEffect)(()=>{(0,c.getOrders)().then(e=>t(e))},[]),u.default.createElement(u.default.Fragment,null,u.default.createElement("div",{style:{height:800,minWidth:"100%"}},u.default.createElement(s.DataGrid,{autoHeight:!0,disableSelectionOnClick:!0,columns:p,rows:d.default.flatMap(e,e=>function(e){return(0,d.default)(e.orderDetails).map((t,r)=>(console.log(e),Object.assign(Object.assign(Object.assign({},e),t),{id:`${e.id}_${r}`}))).value()}(e.data()))})))}},316:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.UserProfile=void 0;const o=n(r(0)),a=n(r(344)),i=n(r(317)),u=n(r(243)),l=n(r(262)),s=r(40);function d(e){let t,r=0;for(t=0;t<e.length;t+=1)r=e.charCodeAt(t)+((r<<5)-r);let n="#";for(t=0;t<3;t+=1){n+=("00"+(r>>8*t&255).toString(16)).substr(-2)}return n}t.UserProfile=({user:e})=>{const[t,r]=o.default.useState(null),n=Boolean(t),c=()=>{r(null)};return o.default.createElement(o.default.Fragment,null,o.default.createElement(l.default,{title:(null==e?void 0:e.displayName)+"\n"+(null==e?void 0:e.email)},o.default.createElement(a.default,Object.assign({},{sx:{bgcolor:d(f=null==e?void 0:e.displayName)},children:`${f.split(" ")[0][0]}${f.split(" ")[1][0]}`},{onClick:e=>{r(e.currentTarget)}}))),o.default.createElement(i.default,{id:"basic-menu",anchorEl:t,open:n,onClose:c,MenuListProps:{"aria-labelledby":"basic-button"}},o.default.createElement(u.default,{onClick:()=>{c(),s.firebaseAppAuth.signOut()}},"Logout")));var f}},40:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.firebaseFirestore=t.authProviders=t.firebaseAppAuth=t.firebaseApp=void 0,r(66),r(67);const o=n(r(68)),a=r(43);t.firebaseApp=o.default.initializeApp({apiKey:"AIzaSyB2IQVqUKIvy2bYOZWzgpjCoGBZ1798lJE",authDomain:"shopper-note.firebaseapp.com",projectId:"shopper-note",storageBucket:"shopper-note.appspot.com",messagingSenderId:"860271096502",appId:"1:860271096502:web:3e545e6eb5c6bbbc426c17",measurementId:"G-F5QCEEVY75"}),t.firebaseAppAuth=t.firebaseApp.auth(),t.firebaseAppAuth.setPersistence(o.default.auth.Auth.Persistence.LOCAL);const i=new o.default.auth.GoogleAuthProvider;i.addScope("https://www.googleapis.com/auth/userinfo.email"),i.addScope("https://www.googleapis.com/auth/userinfo.profile"),i.addScope("openid"),t.authProviders={googleProvider:i},t.firebaseFirestore=o.default.firestore(),t.firebaseFirestore.enablePersistence().catch(e=>{a.logger.warn(e)})},43:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0,t.logger=console},69:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getOrders=t.putOrders=t.putOrder=void 0,r(67);const o=n(r(51)),a=r(70),i=r(40);function u(){const e=a.userStore.currentUser;return`users/${null==e?void 0:e.uid}/orders`}async function l(e){var t;const r=u(),n=i.firebaseFirestore.collection(r).doc(e.id),o=(await n.get()).exists;return e.orderDate=new Date(e.orderDate),await n.set(Object.assign({user:null===(t=a.userStore.currentUser)||void 0===t?void 0:t.uid},e)),!o}t.putOrder=l,t.putOrders=async function(e){return o.default.filter(await Promise.all(e.map(l))).length},t.getOrders=async function(){await a.userStore.refreshCurrentUser();const e=u();return(await i.firebaseFirestore.collection(e).orderBy("orderDate","desc").get()).docs}},70:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.authProviders=t.firebaseAuth=t.userStore=void 0,r(66);const o=n(r(68)),a=r(40).firebaseApp.auth();a.setPersistence(o.default.auth.Auth.Persistence.LOCAL);t.userStore=new class{async refreshCurrentUser(){return new Promise(e=>{a.onAuthStateChanged(t=>{t&&(this.currentUser=t,e(t))})})}},t.userStore.refreshCurrentUser(),t.firebaseAuth=async function(){return await async function(){return new Promise(e=>{a.onAuthStateChanged(t=>{e(null)})})}(),a};const i=new o.default.auth.GoogleAuthProvider;i.addScope("https://www.googleapis.com/auth/userinfo.email"),i.addScope("https://www.googleapis.com/auth/userinfo.profile"),i.addScope("openid"),t.authProviders={googleProvider:i}}});