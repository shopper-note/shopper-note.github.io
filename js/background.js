!function(e){function t(t){for(var s,a,u=t[0],i=t[1],c=t[2],l=0,f=[];l<u.length;l++)a=u[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s]);for(d&&d(t);f.length;)f.shift()();return n.push.apply(n,c||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],s=!0,u=1;u<r.length;u++){var i=r[u];0!==o[i]&&(s=!1)}s&&(n.splice(t--,1),e=a(a.s=r[0]))}return e}var s={},o={1:0},n=[];function a(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=s,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(r,s,function(t){return e[t]}.bind(null,s));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var u=window.webpackJsonp=window.webpackJsonp||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var d=i;n.push([319,0]),r()}({272:function(e,t,r){var s={"./af":89,"./af.js":89,"./ar":90,"./ar-dz":91,"./ar-dz.js":91,"./ar-kw":92,"./ar-kw.js":92,"./ar-ly":93,"./ar-ly.js":93,"./ar-ma":94,"./ar-ma.js":94,"./ar-sa":95,"./ar-sa.js":95,"./ar-tn":96,"./ar-tn.js":96,"./ar.js":90,"./az":97,"./az.js":97,"./be":98,"./be.js":98,"./bg":99,"./bg.js":99,"./bm":100,"./bm.js":100,"./bn":101,"./bn-bd":102,"./bn-bd.js":102,"./bn.js":101,"./bo":103,"./bo.js":103,"./br":104,"./br.js":104,"./bs":105,"./bs.js":105,"./ca":106,"./ca.js":106,"./cs":107,"./cs.js":107,"./cv":108,"./cv.js":108,"./cy":109,"./cy.js":109,"./da":110,"./da.js":110,"./de":111,"./de-at":112,"./de-at.js":112,"./de-ch":113,"./de-ch.js":113,"./de.js":111,"./dv":114,"./dv.js":114,"./el":115,"./el.js":115,"./en-au":116,"./en-au.js":116,"./en-ca":117,"./en-ca.js":117,"./en-gb":118,"./en-gb.js":118,"./en-ie":119,"./en-ie.js":119,"./en-il":120,"./en-il.js":120,"./en-in":121,"./en-in.js":121,"./en-nz":122,"./en-nz.js":122,"./en-sg":123,"./en-sg.js":123,"./eo":124,"./eo.js":124,"./es":125,"./es-do":126,"./es-do.js":126,"./es-mx":127,"./es-mx.js":127,"./es-us":128,"./es-us.js":128,"./es.js":125,"./et":129,"./et.js":129,"./eu":130,"./eu.js":130,"./fa":131,"./fa.js":131,"./fi":132,"./fi.js":132,"./fil":133,"./fil.js":133,"./fo":134,"./fo.js":134,"./fr":135,"./fr-ca":136,"./fr-ca.js":136,"./fr-ch":137,"./fr-ch.js":137,"./fr.js":135,"./fy":138,"./fy.js":138,"./ga":139,"./ga.js":139,"./gd":140,"./gd.js":140,"./gl":141,"./gl.js":141,"./gom-deva":142,"./gom-deva.js":142,"./gom-latn":143,"./gom-latn.js":143,"./gu":144,"./gu.js":144,"./he":145,"./he.js":145,"./hi":146,"./hi.js":146,"./hr":147,"./hr.js":147,"./hu":148,"./hu.js":148,"./hy-am":149,"./hy-am.js":149,"./id":150,"./id.js":150,"./is":151,"./is.js":151,"./it":152,"./it-ch":153,"./it-ch.js":153,"./it.js":152,"./ja":154,"./ja.js":154,"./jv":155,"./jv.js":155,"./ka":156,"./ka.js":156,"./kk":157,"./kk.js":157,"./km":158,"./km.js":158,"./kn":159,"./kn.js":159,"./ko":160,"./ko.js":160,"./ku":161,"./ku.js":161,"./ky":162,"./ky.js":162,"./lb":163,"./lb.js":163,"./lo":164,"./lo.js":164,"./lt":165,"./lt.js":165,"./lv":166,"./lv.js":166,"./me":167,"./me.js":167,"./mi":168,"./mi.js":168,"./mk":169,"./mk.js":169,"./ml":170,"./ml.js":170,"./mn":171,"./mn.js":171,"./mr":172,"./mr.js":172,"./ms":173,"./ms-my":174,"./ms-my.js":174,"./ms.js":173,"./mt":175,"./mt.js":175,"./my":176,"./my.js":176,"./nb":177,"./nb.js":177,"./ne":178,"./ne.js":178,"./nl":179,"./nl-be":180,"./nl-be.js":180,"./nl.js":179,"./nn":181,"./nn.js":181,"./oc-lnc":182,"./oc-lnc.js":182,"./pa-in":183,"./pa-in.js":183,"./pl":184,"./pl.js":184,"./pt":185,"./pt-br":186,"./pt-br.js":186,"./pt.js":185,"./ro":187,"./ro.js":187,"./ru":188,"./ru.js":188,"./sd":189,"./sd.js":189,"./se":190,"./se.js":190,"./si":191,"./si.js":191,"./sk":192,"./sk.js":192,"./sl":193,"./sl.js":193,"./sq":194,"./sq.js":194,"./sr":195,"./sr-cyrl":196,"./sr-cyrl.js":196,"./sr.js":195,"./ss":197,"./ss.js":197,"./sv":198,"./sv.js":198,"./sw":199,"./sw.js":199,"./ta":200,"./ta.js":200,"./te":201,"./te.js":201,"./tet":202,"./tet.js":202,"./tg":203,"./tg.js":203,"./th":204,"./th.js":204,"./tk":205,"./tk.js":205,"./tl-ph":206,"./tl-ph.js":206,"./tlh":207,"./tlh.js":207,"./tr":208,"./tr.js":208,"./tzl":209,"./tzl.js":209,"./tzm":210,"./tzm-latn":211,"./tzm-latn.js":211,"./tzm.js":210,"./ug-cn":212,"./ug-cn.js":212,"./uk":213,"./uk.js":213,"./ur":214,"./ur.js":214,"./uz":215,"./uz-latn":216,"./uz-latn.js":216,"./uz.js":215,"./vi":217,"./vi.js":217,"./x-pseudo":218,"./x-pseudo.js":218,"./yo":219,"./yo.js":219,"./zh-cn":220,"./zh-cn.js":220,"./zh-hk":221,"./zh-hk.js":221,"./zh-mo":222,"./zh-mo.js":222,"./zh-tw":223,"./zh-tw.js":223};function o(e){var t=n(e);return r(t)}function n(e){if(!r.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}o.keys=function(){return Object.keys(s)},o.resolve=n,e.exports=o,o.id=272},319:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(320),o=r(338),n=r(70);r(40);const a=r(69);async function u(e){const t=await(0,a.putOrders)(e);chrome.browserAction.setBadgeText({text:"+"+t})}!function e(){console.log("polling"),setTimeout(e,3e4)}();const i=new s.Auction,c=new o.St11;chrome.runtime.onMessage.addListener((async function(e,t,r){console.log("Received %o from %o, frame",e,t.tab,t.frameId);const s={};switch(s.email=n.userStore.currentUser.email,e.operation){case"runAuction":u(await i.getOrders());break;case"putOrders":u(e.orders);break;case"getProfile":s.user=n.userStore.currentUser;break;case"runSt11":u(await c.getOrders())}r(`Gotcha! ${e.operation}, ${JSON.stringify(s)}`)})),chrome.browserAction.onClicked.addListener((function(e){chrome.tabs.create({url:chrome.runtime.getURL("main.html")})}))},320:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Auction=void 0;const o=s(r(263)),n=s(r(51));function a(e){const t=e.ItemPrice,r=e.RealPayAmount,s=t-r;return{productId:e.ItemNo,productName:e.ItemName,productImageUrl:e.ItemImageUrl,price:r,currency:"원",quantity:1,discount:s,total:t,trace:{},rawInfo:e}}async function u(e){const t=await o.default.get("https://mmya.auction.co.kr/MyAuction/Order/GetMyOrderDetailAndVirtualAccount",{params:{payNo:e.orderNumber}});e.orderDetails=n.default.map(n.default.get(t.data,"OrderList.PayInfoList[0].OrderList"),a)}function i(e){const t=e.PayNo,r=e.PayDateString,s=e.TotalOrderAmount;return{id:"auction-"+t,market:"auction",orderNumber:t,orderDate:new Date(r),originPrice:-1,orderedPrice:s,currency:"원",status:0,orderDetails:[],rawInfo:e}}function c(e){const t=[];for(const r of e.orderList.PayInfoList)t.push(i(r));return t}t.Auction=class{async getOrders(){const e=async e=>(await o.default.get("https://mmya.auction.co.kr/MyAuction/Order/GetMyOrderList",{params:{searchPeriod:"6M",searchStatus:"ALL",searchKeyword:"",pageIndex:e,pageSize:10}})).data,t=await e(1),r=t.orderList.TotalOrderCount;let s=c(t);for(const t of n.default.range(2,r/10))s=s.concat(c(await e(t)));for(const e of s)u(e);return s}}},338:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.St11=void 0;const o=s(r(263)),n=s(r(51)),a=s(r(7)),u=r(43);function i(e){const t=e.selPrc,r=e.ordPrdWonStl,s=t-r;return{productId:e.prdNo,productName:e.prdNm,productImageUrl:e.imgURL,price:r,currency:"원",quantity:1,discount:s,total:t,trace:{},rawInfo:e}}t.St11=class{async getOrders(){u.logger.debug("St11 getOrders.");let e=[];const t=(0,a.default)().date(1);for(const r of n.default.range(6))e=e.concat(await this.getOrdersByDate(t.clone().subtract(r,"M")));return u.logger.debug("orders",e),e}async getOrdersByDate(e){const t=await(async()=>(await o.default.get("https://m.11st.co.kr/MW/MyPage/api/V1/orderProductList.tmall",{params:{shDateFrom:e.format("YYYYMMDD"),shDateTo:e.clone().endOf("month").format("YYYYMMDD"),firstCall:!0}})).data)();return r=t.data.products,n.default.map(r,i),n.default.chain(r).groupBy("ordNo").map(e=>{const t=n.default.map(e,i),s=r[0],o=s.ordNo,a=s.ordDt,u=s.selPrc,c=s.ordPrdWonStl;return{id:"st11-"+o,market:"st11",orderNumber:o,orderDate:new Date(a),originPrice:u,orderedPrice:c,currency:"원",status:0,orderDetails:t,rawInfo:e}}).value();var r}}},40:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.firebaseFirestore=t.authProviders=t.firebaseAppAuth=t.firebaseApp=void 0,r(66),r(67);const o=s(r(68)),n=r(43);t.firebaseApp=o.default.initializeApp({apiKey:"AIzaSyB2IQVqUKIvy2bYOZWzgpjCoGBZ1798lJE",authDomain:"shopper-note.firebaseapp.com",projectId:"shopper-note",storageBucket:"shopper-note.appspot.com",messagingSenderId:"860271096502",appId:"1:860271096502:web:3e545e6eb5c6bbbc426c17",measurementId:"G-F5QCEEVY75"}),t.firebaseAppAuth=t.firebaseApp.auth(),t.firebaseAppAuth.setPersistence(o.default.auth.Auth.Persistence.LOCAL);const a=new o.default.auth.GoogleAuthProvider;a.addScope("https://www.googleapis.com/auth/userinfo.email"),a.addScope("https://www.googleapis.com/auth/userinfo.profile"),a.addScope("openid"),t.authProviders={googleProvider:a},t.firebaseFirestore=o.default.firestore(),t.firebaseFirestore.enablePersistence().catch(e=>{n.logger.warn(e)})},43:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0,t.logger=console},69:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getOrders=t.putOrders=t.putOrder=void 0,r(67);const o=s(r(51)),n=r(70),a=r(40);function u(){const e=n.userStore.currentUser;return`users/${null==e?void 0:e.uid}/orders`}async function i(e){var t;const r=u(),s=a.firebaseFirestore.collection(r).doc(e.id),o=(await s.get()).exists;return e.orderDate=new Date(e.orderDate),await s.set(Object.assign({user:null===(t=n.userStore.currentUser)||void 0===t?void 0:t.uid},e)),!o}t.putOrder=i,t.putOrders=async function(e){return o.default.filter(await Promise.all(e.map(i))).length},t.getOrders=async function(){await n.userStore.refreshCurrentUser();const e=u();return(await a.firebaseFirestore.collection(e).orderBy("orderDate","desc").get()).docs}},70:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.authProviders=t.firebaseAuth=t.userStore=void 0,r(66);const o=s(r(68)),n=r(40).firebaseApp.auth();n.setPersistence(o.default.auth.Auth.Persistence.LOCAL);t.userStore=new class{async refreshCurrentUser(){return new Promise(e=>{n.onAuthStateChanged(t=>{t&&(this.currentUser=t,e(t))})})}},t.userStore.refreshCurrentUser(),t.firebaseAuth=async function(){return await async function(){return new Promise(e=>{n.onAuthStateChanged(t=>{e(null)})})}(),n};const a=new o.default.auth.GoogleAuthProvider;a.addScope("https://www.googleapis.com/auth/userinfo.email"),a.addScope("https://www.googleapis.com/auth/userinfo.profile"),a.addScope("openid"),t.authProviders={googleProvider:a}}});